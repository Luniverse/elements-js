/*!
 * Luniverse Elements v2.1
 * ES2017 micro-templating engine
 * Licensed under the MIT license
 * Copyright (c) 2018 Lukas Jans
 * https://github.com/luniverse/elements-js
 */
class Elements{constructor(e,t=Elements.settings){this.template=e,this.settings=t}empty(e){return!e||e instanceof Array&&!e.length}zero(e){return e<10?"0"+e:e}clean(e){const t=new RegExp(this.settings.open+"!.+?"+this.settings.close,"g");return e.replace(t,"").replace(/[\r\n\t]/g,"")}static render(e,t){return new Elements(e).render(t)}render(e){const t=this.renderElement(e,this.template);return this.clean(t)}renderSections(e,t){const s=new RegExp(this.settings.open+"(\\^|#)(.+?)"+this.settings.close+"((?:\\s|\\S)+?)"+this.settings.open+"/\\2"+this.settings.close,"g");return t.replace(s,(t,s,r,n)=>{const i=e[r];return"#"!=s||this.empty(i)?"^"==s&&this.empty(i)?this.renderRecursive(e,n):"":this.renderElement(i,n,e)})}renderVariables(e,t,s=""){if(e instanceof Array)return t;for(const[r,n]of Object.entries(e))if(n instanceof Object)t=this.renderVariables(n,t,s+r+".");else{const e=new RegExp(this.settings.open+s+r+this.settings.close,"g");t=t.replace(e,n)}return t}renderElement(e,t,s={}){return e instanceof Function?e(t):e instanceof Array?this.renderList(e,t,s):e instanceof Date?this.renderDate(e,t):e instanceof Object?this.renderRecursive(Object.assign({".":s},e),t):s instanceof Array?this.renderRecursive({".":e},t):s instanceof Object?this.renderRecursive(Object.assign(s,{".":e}),t):void 0}renderRecursive(e,t){return t=this.renderSections(e,t),t=this.renderVariables(e,t)}renderList(e,t,s){return e.map(e=>this.renderElement(e,t,s)).join("")}renderDate(e,t){const s={};return s.j=e.getDate(),s.w=e.getDay(),s.n=e.getMonth()+1,s.F=this.settings.months[e.getMonth()],s.Y=e.getFullYear(),s.G=e.getHours(),s.i=this.zero(e.getMinutes()),s.s=this.zero(e.getSeconds()),s.v=e.getTime(),s.d=this.zero(s.j),s.N=s.w+1,s.l=this.settings.days[s.w],s.m=this.zero(s.n),s.H=this.zero(s.G),s.U=Math.floor(s.v/1e3),s.D=s.l.substr(0,3),s.M=s.F.substr(0,3),this.renderVariables(s,t)}}Elements.settings={open:"{{",close:"}}",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]};