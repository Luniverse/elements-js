/*!
 * Luniverse Elements v3.0
 * ES2017 micro-templating engine
 * Licensed under the MIT license
 * Copyright (c) 2019 Lukas Jans
 * https://github.com/luniverse/elements-js
 */
class Elements{get open(){return this.escape(this.config.open||this.constructor.open||"{{")}get close(){return this.escape(this.config.close||this.constructor.close||"}}")}set open(e){this.config.open=e}set close(e){this.config.close=e}constructor(e,t={}){this.template=e,this.config=t}context(e,t,r){if("."==e)return t;let n=t;for(const t of e.split("."))if(void 0===(n=n[t])){r&&(n=this.context(e,r));break}return n}escape(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}empty(e){return!(e instanceof Function||e instanceof Date)&&(e instanceof Object?!Object.keys(e).length:!e)}clean(e){const t=new RegExp(this.open+"!.+?"+this.close,"g");return e.replace(t,"").replace(/[\r\n\t]/g,"")}static render(e,t){return new this(e).render(t)}render(e={}){this.data=e;const t=this.renderRecursive(this.template,e);return this.clean(t)}renderSections(e,t){const r=new RegExp(this.open+"(\\^|#)(.+?)"+this.close+"((?:\\s|\\S)+?)"+this.open+"/\\2"+this.close,"g");return e.replace(r,(e,r,n,s)=>{const o=this.context(n,t,this.data);return"#"==r^this.empty(o)?this.renderRecursive(s,o):""})}renderPlaceholders(e,t){const r=new RegExp(this.open+"(.+?)"+this.close,"g");return e.replace(r,(e,r)=>{const n=this.context(r,t);return"string"==typeof n||"number"==typeof n?n:e})}renderRecursive(e,t){return t instanceof Function?t(e):t instanceof Array&&t.length?this.renderArray(e,t):t instanceof Date?this.renderDate(e,t):(e=this.renderSections(e,t),e=this.renderPlaceholders(e,t))}renderArray(e,t){return t.map(t=>this.renderRecursive(e,t)).join("")}renderDate(e,t){return this.renderPlaceholders(e,{d:t.getDate().toString().padStart(2,0),j:t.getDate(),w:t.getDay(),m:(t.getMonth()+1).toString().padStart(2,0),n:t.getMonth()+1,Y:t.getFullYear(),G:t.getHours(),H:t.getHours().toString().padStart(2,0),i:t.getMinutes().toString().padStart(2,0),s:t.getSeconds().toString().padStart(2,0)})}}